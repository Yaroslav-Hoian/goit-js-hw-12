{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImagesByQuery(query, page) {\n    const response = await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n            key: \"51210907-49260f6ab8f7fee8b1bad09dd\",\n            q: query,\n            page: page,\n            per_page: 15,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true\n        }\n    });\n    return response.data;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst list = document.querySelector(\".gallery\");\nconst loaderSpan = document.querySelector(\".loader\");\nconst btnLoad = document.querySelector(\"[type='button']\");\n\nconst lightbox = new SimpleLightbox('.gallery-item a', {\n    captionsData: \"alt\",\n    captionDelay: 250\n})\n\nexport function createGallery(images) {\n    const markup = images.hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n            />\n        </a>\n        <ul class=\"list-box\">\n            <li class=\"item-description\">\n                <h3 class=\"subtitle\">Likes</h3>\n                <p class=\"subtext\">${likes}</p>\n            </li>\n            <li class=\"item-description\">\n                <h3 class=\"subtitle\">Views</h3>\n                <p class=\"subtext\">${views}</p>\n            </li>\n            <li class=\"item-description\">\n                <h3 class=\"subtitle\">Comments</h3>\n                <p class=\"subtext\">${comments}</p>\n            </li>\n            <li class=\"item-description\">\n                <h3 class=\"subtitle\">Downloads</h3>\n                <p class=\"subtext\">${downloads}</p>\n            </li>\n        </ul>\n    </li>\n`)\n        .join('');\n\n    list.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    list.innerHTML = '';\n}\n\nexport function showLoader() {\n    loaderSpan.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loaderSpan.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n    btnLoad.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n    btnLoad.classList.add(\"hidden\");\n}   ","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n} from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nconst input = form.querySelector(\"input[name='search-text']\");\nconst btnLoad = document.querySelector(\"[type='button']\");\n\nform.addEventListener(\"submit\", handleSubmit);\n\nlet searchText = \"\";\nlet page = 1;\nconst limit = 15;\nlet totalPage = 0;\n\nasync function handleSubmit(ev) {\n    ev.preventDefault();\n    hideLoadMoreButton();\n    clearGallery();\n    page = 1;\n\n    const inputText = input.value.trim();\n    searchText = inputText;\n\n    if (inputText === \"\") {\n        iziToast.error({\n            title: `Please write word`,\n            position: \"topRight\"\n        });\n        return;\n    };\n\n    showLoader();\n\n    try {\n        const posts = await getImagesByQuery(inputText, page)\n        const totalHits = posts.totalHits;\n\n        if (posts.hits.length === 0) {\n            iziToast.error({\n                title: `Sorry, there are no images matching your search ${inputText}. Please try again!`,\n                position: \"topRight\"\n            });\n            return;\n        };\n\n        createGallery(posts);\n\n        totalPage = Math.ceil(totalHits / limit);\n\n        if (page >= totalPage) {\n            iziToast.info({\n                title: `We're sorry, but you've reached the end of search results.`,\n                position: \"topRight\"\n            });\n        } else {\n            showLoadMoreButton();\n        }\n\n        form.reset();\n\n    } catch (error) {\n        iziToast.error({\n            title: error.message,\n        });\n    }\n    finally {\n        hideLoader();\n    }\n};\n\nbtnLoad.addEventListener(\"click\", handleLoad);\n\nasync function handleLoad(ev) {\n    page++\n\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const posts = await getImagesByQuery(searchText, page);\n\n        if (posts.hits.length === 0) {\n            iziToast.info({\n                title: `We're sorry, but you've reached the end of search results.`,\n                position: \"topRight\"\n            });\n            return;\n        };\n\n        if (page >= totalPage) {\n            iziToast.info({\n                title: `We're sorry, but you've reached the end of search results.`,\n                position: \"topRight\"\n            });\n        } else {\n            showLoadMoreButton();\n        }\n\n        createGallery(posts);\n\n        let card = document.querySelector(\".gallery-item\");\n        if (card) {\n            const cardHeight = card.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\",\n            });\n        }\n    }\n    catch (error) {\n        iziToast.error({\n            title: error.message,\n        });\n    }\n    finally {\n        hideLoader();\n    }\n};\n\n"],"names":["getImagesByQuery","query","page","axios","list","loaderSpan","btnLoad","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","handleSubmit","searchText","limit","totalPage","ev","inputText","iziToast","posts","totalHits","error","handleLoad","card","cardHeight"],"mappings":"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"}